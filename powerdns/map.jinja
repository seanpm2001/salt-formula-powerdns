{%- set server = salt['grains.filter_by']({
    'Debian': {
        'service': 'pdns',
        'config': '/etc/powerdns/pdns.conf',
        'local_config': '/etc/powerdns/pdns.d/pdns.local.conf',
        'backend': {
            'engine': 'mysql',
            'host': 'localhost',
            'port': '3306',
            'use_socket': False,
            'socket': '/var/run/mysqld/mysqld.sock',
            'dbname': 'powerdns',
            'user': 'powerdns',
            'password': 'powerdns',
            'timeout': 10,
            'dnssec': 'on'
        },
        'bind': {
            'address': '127.0.0.1',
            'port': 53,
        },
        'default_soa_name': 'a.very.best.power.dns.server',
        'soa_minimum_ttl': 3600,
        'axfr_ips': [ '127.0.0.1' ],
        'version_string': 'powerdns',
        'webserver': {
            'enabled': false,
            'address': '127.0.0.1',
            'port': 8081,
        },
        'api': {
            'enabled': false,
        },
    },
    'RedHat': {
        'service': 'pdns',
        'config': '/etc/powerdns/pdns.conf',
        'local_config': '/etc/powerdns/pdns.d/pdns.local.conf',
        'backend': {
            'engine': 'mysql',
            'host': 'localhost',
            'port': '3306',
            'dbname': 'powerdns',
            'user': 'mysql',
            'password': 'mysql',
            'timeout': 10,
            'dnssec': 'on'
        },
        'bind': {
            'address': '127.0.0.1',
            'port': 53,
        },
        'default_soa_name': 'a.very.best.power.dns.server',
        'soa_minimum_ttl': 3600,
        'axfr_ips': '127.0.0.1',
        'version_string': 'powerdns',
        'webserver': {
            'enabled': false,
            'address': '127.0.0.1',
            'port': 8081,
        },
        'api': {
            'enabled': false,
        },
    },
}, merge=salt['pillar.get']('powerdns:server')) %}
